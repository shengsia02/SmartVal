<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>房屋列表 - {{ total_count }} 筆資料</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">

  <header class="sticky top-0 z-10 border-b border-slate-200 bg-white/80 backdrop-blur">
    <div class="mx-auto max-w-6xl px-4 py-5 flex items-center justify-between">
      <h1 class="text-2xl font-semibold tracking-tight">房屋列表</h1>
      <span class="text-sm text-slate-500">共 {{ total_count }} 筆資料</span>
      <a href="{% url 'house:house_create' %}" class="px-4 py-2 text-sm font-semibold text-white bg-green-600 hover:bg-green-700 rounded-lg">
        新增房屋
      </a>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-8">
    {% if houses %}
      
      <div class="bg-white shadow-md rounded-lg overflow-x-auto">
        <table class="min-w-full divide-y divide-slate-200">
          
          <thead class="bg-slate-50">
            <tr>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">
                房屋地址
              </th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">
                房屋類型
              </th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">
                總價
              </th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">
                房屋中介
              </th>
              <th scope="col" class="relative px-6 py-3">
                <span class="sr-only">操作</span>
              </th>
            </tr>
          </thead>

          <tbody class="bg-white divide-y divide-slate-200">
            {% for house in houses %}
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <a href="{% url 'house:house_detail' house.id %}" class="block text-sm font-medium text-blue-600 hover:text-blue-800 truncate" title="{{ house.address }}">
                    {{ house.address }}
                  </a>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <p class="text-sm text-slate-600">{{ house.house_type }}</p>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <p class="text-sm text-slate-600">{{ house.total_price }} 萬</p>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  {% if house.agent %}
                    <p class="text-sm text-slate-600">{{ house.agent.name }}</p>
                  {% else %}
                    <p class="text-sm text-slate-500">無中介資料</p>
                  {% endif %}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <div class="flex items-center justify-end gap-2">
                    
                    <a href="{% url 'house:house_edit' house.id %}"
                       class="inline-flex items-center rounded-lg bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400">
                      編輯
                    </a>
                    
                    <form method="post" action="{% url 'house:house_list' %}"
                          onsubmit="return confirm('確定要刪除這筆房屋資料嗎？');">
                      {% csrf_token %}
                      <input type="hidden" name="house_id" value="{{ house.id }}">
                      <button type="submit"
                        class="inline-flex items-center rounded-lg bg-red-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400">
                        刪除
                      </button>
                    </form>

                  </div>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="rounded-2xl border border-dashed border-slate-300 bg-white p-12 text-center">
        <p class="text-slate-500">目前沒有房屋資料。</p>
      </div>
    {% endif %}
  </main>

  <footer class="mx-auto max-w-6xl px-4 py-8 text-center text-xs text-slate-400">
    Powered by Django · Tailwind
  </footer>

</body>
</html>